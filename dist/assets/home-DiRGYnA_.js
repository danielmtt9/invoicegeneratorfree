const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/react-pdf.browser-21dgEwUp.js","assets/Layout-pqkbK2kO.js","assets/Layout-DkXdZFZH.css","assets/InvoicePdf-BKle230d.js"])))=>i.map(i=>d[i]);
import{g as bt,r as dt,a as L,j as o,t as Ct,R as jt,C as Pt,S as Et}from"./Layout-pqkbK2kO.js";const St="modulepreload",Rt=function(n){return"/"+n},Ae={},Be=function(e,s,r){let t=Promise.resolve();if(s&&s.length>0){let a=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));t=a(s.map(f=>{if(f=Rt(f),f in Ae)return;Ae[f]=!0;const m=f.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const g=document.createElement("link");if(g.rel=m?"stylesheet":St,m||(g.as="script"),g.crossOrigin="",g.href=f,u&&g.setAttribute("nonce",u),document.head.appendChild(g),m)return new Promise((p,x)=>{g.addEventListener("load",p),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return t.then(a=>{for(const c of a||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})};var K={},ee,De;function It(){return De||(De=1,ee=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),ee}var te={},_={},Le;function O(){if(Le)return _;Le=1;let n;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return _.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},_.getSymbolTotalCodewords=function(r){return e[r]},_.getBCHDigit=function(s){let r=0;for(;s!==0;)r++,s>>>=1;return r},_.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');n=r},_.isKanjiModeEnabled=function(){return typeof n<"u"},_.toSJIS=function(r){return n(r)},_}var ne={},Me;function Pe(){return Me||(Me=1,(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+s)}}n.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},n.from=function(r,t){if(n.isValid(r))return r;try{return e(r)}catch{return t}}})(ne)),ne}var re,Fe;function Tt(){if(Fe)return re;Fe=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(e){const s=Math.floor(e/8);return(this.buffer[s]>>>7-e%8&1)===1},put:function(e,s){for(let r=0;r<s;r++)this.putBit((e>>>s-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const s=Math.floor(this.length/8);this.buffer.length<=s&&this.buffer.push(0),e&&(this.buffer[s]|=128>>>this.length%8),this.length++}},re=n,re}var ie,ke;function At(){if(ke)return ie;ke=1;function n(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return n.prototype.set=function(e,s,r,t){const i=e*this.size+s;this.data[i]=r,t&&(this.reservedBit[i]=!0)},n.prototype.get=function(e,s){return this.data[e*this.size+s]},n.prototype.xor=function(e,s,r){this.data[e*this.size+s]^=r},n.prototype.isReserved=function(e,s){return this.reservedBit[e*this.size+s]},ie=n,ie}var oe={},Ue;function Bt(){return Ue||(Ue=1,(function(n){const e=O().getSymbolSize;n.getRowColCoords=function(r){if(r===1)return[];const t=Math.floor(r/7)+2,i=e(r),a=i===145?26:Math.ceil((i-13)/(2*t-2))*2,c=[i-7];for(let u=1;u<t-1;u++)c[u]=c[u-1]-a;return c.push(6),c.reverse()},n.getPositions=function(r){const t=[],i=n.getRowColCoords(r),a=i.length;for(let c=0;c<a;c++)for(let u=0;u<a;u++)c===0&&u===0||c===0&&u===a-1||c===a-1&&u===0||t.push([i[c],i[u]]);return t}})(oe)),oe}var se={},_e;function Dt(){if(_e)return se;_e=1;const n=O().getSymbolSize,e=7;return se.getPositions=function(r){const t=n(r);return[[0,0],[t-e,0],[0,t-e]]},se}var ae={},qe;function Lt(){return qe||(qe=1,(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7},n.from=function(t){return n.isValid(t)?parseInt(t,10):void 0},n.getPenaltyN1=function(t){const i=t.size;let a=0,c=0,u=0,f=null,m=null;for(let y=0;y<i;y++){c=u=0,f=m=null;for(let g=0;g<i;g++){let p=t.get(y,g);p===f?c++:(c>=5&&(a+=e.N1+(c-5)),f=p,c=1),p=t.get(g,y),p===m?u++:(u>=5&&(a+=e.N1+(u-5)),m=p,u=1)}c>=5&&(a+=e.N1+(c-5)),u>=5&&(a+=e.N1+(u-5))}return a},n.getPenaltyN2=function(t){const i=t.size;let a=0;for(let c=0;c<i-1;c++)for(let u=0;u<i-1;u++){const f=t.get(c,u)+t.get(c,u+1)+t.get(c+1,u)+t.get(c+1,u+1);(f===4||f===0)&&a++}return a*e.N2},n.getPenaltyN3=function(t){const i=t.size;let a=0,c=0,u=0;for(let f=0;f<i;f++){c=u=0;for(let m=0;m<i;m++)c=c<<1&2047|t.get(f,m),m>=10&&(c===1488||c===93)&&a++,u=u<<1&2047|t.get(m,f),m>=10&&(u===1488||u===93)&&a++}return a*e.N3},n.getPenaltyN4=function(t){let i=0;const a=t.data.length;for(let u=0;u<a;u++)i+=t.data[u];return Math.abs(Math.ceil(i*100/a/5)-10)*e.N4};function s(r,t,i){switch(r){case n.Patterns.PATTERN000:return(t+i)%2===0;case n.Patterns.PATTERN001:return t%2===0;case n.Patterns.PATTERN010:return i%3===0;case n.Patterns.PATTERN011:return(t+i)%3===0;case n.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(i/3))%2===0;case n.Patterns.PATTERN101:return t*i%2+t*i%3===0;case n.Patterns.PATTERN110:return(t*i%2+t*i%3)%2===0;case n.Patterns.PATTERN111:return(t*i%3+(t+i)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}n.applyMask=function(t,i){const a=i.size;for(let c=0;c<a;c++)for(let u=0;u<a;u++)i.isReserved(u,c)||i.xor(u,c,s(t,u,c))},n.getBestMask=function(t,i){const a=Object.keys(n.Patterns).length;let c=0,u=1/0;for(let f=0;f<a;f++){i(f),n.applyMask(f,t);const m=n.getPenaltyN1(t)+n.getPenaltyN2(t)+n.getPenaltyN3(t)+n.getPenaltyN4(t);n.applyMask(f,t),m<u&&(u=m,c=f)}return c}})(ae)),ae}var J={},Oe;function ft(){if(Oe)return J;Oe=1;const n=Pe(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],s=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return J.getBlocksCount=function(t,i){switch(i){case n.L:return e[(t-1)*4+0];case n.M:return e[(t-1)*4+1];case n.Q:return e[(t-1)*4+2];case n.H:return e[(t-1)*4+3];default:return}},J.getTotalCodewordsCount=function(t,i){switch(i){case n.L:return s[(t-1)*4+0];case n.M:return s[(t-1)*4+1];case n.Q:return s[(t-1)*4+2];case n.H:return s[(t-1)*4+3];default:return}},J}var le={},z={},Ve;function Mt(){if(Ve)return z;Ve=1;const n=new Uint8Array(512),e=new Uint8Array(256);return(function(){let r=1;for(let t=0;t<255;t++)n[t]=r,e[r]=t,r<<=1,r&256&&(r^=285);for(let t=255;t<512;t++)n[t]=n[t-255]})(),z.log=function(r){if(r<1)throw new Error("log("+r+")");return e[r]},z.exp=function(r){return n[r]},z.mul=function(r,t){return r===0||t===0?0:n[e[r]+e[t]]},z}var He;function Ft(){return He||(He=1,(function(n){const e=Mt();n.mul=function(r,t){const i=new Uint8Array(r.length+t.length-1);for(let a=0;a<r.length;a++)for(let c=0;c<t.length;c++)i[a+c]^=e.mul(r[a],t[c]);return i},n.mod=function(r,t){let i=new Uint8Array(r);for(;i.length-t.length>=0;){const a=i[0];for(let u=0;u<t.length;u++)i[u]^=e.mul(t[u],a);let c=0;for(;c<i.length&&i[c]===0;)c++;i=i.slice(c)}return i},n.generateECPolynomial=function(r){let t=new Uint8Array([1]);for(let i=0;i<r;i++)t=n.mul(t,new Uint8Array([1,e.exp(i)]));return t}})(le)),le}var ce,Ke;function kt(){if(Ke)return ce;Ke=1;const n=Ft();function e(s){this.genPoly=void 0,this.degree=s,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(r){this.degree=r,this.genPoly=n.generateECPolynomial(this.degree)},e.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(r.length+this.degree);t.set(r);const i=n.mod(t,this.genPoly),a=this.degree-i.length;if(a>0){const c=new Uint8Array(this.degree);return c.set(i,a),c}return i},ce=e,ce}var ue={},de={},fe={},ze;function ht(){return ze||(ze=1,fe.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),fe}var F={},Ge;function gt(){if(Ge)return F;Ge=1;const n="[0-9]+",e="[A-Z $%*+\\-./:]+";let s="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";s=s.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+s+`)(?:.|[\r
]))+`;F.KANJI=new RegExp(s,"g"),F.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),F.BYTE=new RegExp(r,"g"),F.NUMERIC=new RegExp(n,"g"),F.ALPHANUMERIC=new RegExp(e,"g");const t=new RegExp("^"+s+"$"),i=new RegExp("^"+n+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return F.testKanji=function(u){return t.test(u)},F.testNumeric=function(u){return i.test(u)},F.testAlphanumeric=function(u){return a.test(u)},F}var Ye;function V(){return Ye||(Ye=1,(function(n){const e=ht(),s=gt();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(i,a){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?i.ccBits[0]:a<27?i.ccBits[1]:i.ccBits[2]},n.getBestModeForData=function(i){return s.testNumeric(i)?n.NUMERIC:s.testAlphanumeric(i)?n.ALPHANUMERIC:s.testKanji(i)?n.KANJI:n.BYTE},n.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},n.isValid=function(i){return i&&i.bit&&i.ccBits};function r(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+t)}}n.from=function(i,a){if(n.isValid(i))return i;try{return r(i)}catch{return a}}})(de)),de}var Je;function Ut(){return Je||(Je=1,(function(n){const e=O(),s=ft(),r=Pe(),t=V(),i=ht(),a=7973,c=e.getBCHDigit(a);function u(g,p,x){for(let v=1;v<=40;v++)if(p<=n.getCapacity(v,x,g))return v}function f(g,p){return t.getCharCountIndicator(g,p)+4}function m(g,p){let x=0;return g.forEach(function(v){const I=f(v.mode,p);x+=I+v.getBitsLength()}),x}function y(g,p){for(let x=1;x<=40;x++)if(m(g,x)<=n.getCapacity(x,p,t.MIXED))return x}n.from=function(p,x){return i.isValid(p)?parseInt(p,10):x},n.getCapacity=function(p,x,v){if(!i.isValid(p))throw new Error("Invalid QR Code version");typeof v>"u"&&(v=t.BYTE);const I=e.getSymbolTotalCodewords(p),b=s.getTotalCodewordsCount(p,x),T=(I-b)*8;if(v===t.MIXED)return T;const E=T-f(v,p);switch(v){case t.NUMERIC:return Math.floor(E/10*3);case t.ALPHANUMERIC:return Math.floor(E/11*2);case t.KANJI:return Math.floor(E/13);case t.BYTE:default:return Math.floor(E/8)}},n.getBestVersionForData=function(p,x){let v;const I=r.from(x,r.M);if(Array.isArray(p)){if(p.length>1)return y(p,I);if(p.length===0)return 1;v=p[0]}else v=p;return u(v.mode,v.getLength(),I)},n.getEncodedBits=function(p){if(!i.isValid(p)||p<7)throw new Error("Invalid QR Code version");let x=p<<12;for(;e.getBCHDigit(x)-c>=0;)x^=a<<e.getBCHDigit(x)-c;return p<<12|x}})(ue)),ue}var he={},Qe;function _t(){if(Qe)return he;Qe=1;const n=O(),e=1335,s=21522,r=n.getBCHDigit(e);return he.getEncodedBits=function(i,a){const c=i.bit<<3|a;let u=c<<10;for(;n.getBCHDigit(u)-r>=0;)u^=e<<n.getBCHDigit(u)-r;return(c<<10|u)^s},he}var ge={},me,We;function qt(){if(We)return me;We=1;const n=V();function e(s){this.mode=n.NUMERIC,this.data=s.toString()}return e.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let t,i,a;for(t=0;t+3<=this.data.length;t+=3)i=this.data.substr(t,3),a=parseInt(i,10),r.put(a,10);const c=this.data.length-t;c>0&&(i=this.data.substr(t),a=parseInt(i,10),r.put(a,c*3+1))},me=e,me}var pe,Ze;function Ot(){if(Ze)return pe;Ze=1;const n=V(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function s(r){this.mode=n.ALPHANUMERIC,this.data=r}return s.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(t){let i;for(i=0;i+2<=this.data.length;i+=2){let a=e.indexOf(this.data[i])*45;a+=e.indexOf(this.data[i+1]),t.put(a,11)}this.data.length%2&&t.put(e.indexOf(this.data[i]),6)},pe=s,pe}var ye,Xe;function Vt(){if(Xe)return ye;Xe=1;const n=V();function e(s){this.mode=n.BYTE,typeof s=="string"?this.data=new TextEncoder().encode(s):this.data=new Uint8Array(s)}return e.getBitsLength=function(r){return r*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(s){for(let r=0,t=this.data.length;r<t;r++)s.put(this.data[r],8)},ye=e,ye}var ve,$e;function Ht(){if($e)return ve;$e=1;const n=V(),e=O();function s(r){this.mode=n.KANJI,this.data=r}return s.getBitsLength=function(t){return t*13},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(r){let t;for(t=0;t<this.data.length;t++){let i=e.toSJIS(this.data[t]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),r.put(i,13)}},ve=s,ve}var we={exports:{}},et;function Kt(){return et||(et=1,(function(n){var e={single_source_shortest_paths:function(s,r,t){var i={},a={};a[r]=0;var c=e.PriorityQueue.make();c.push(r,0);for(var u,f,m,y,g,p,x,v,I;!c.empty();){u=c.pop(),f=u.value,y=u.cost,g=s[f]||{};for(m in g)g.hasOwnProperty(m)&&(p=g[m],x=y+p,v=a[m],I=typeof a[m]>"u",(I||v>x)&&(a[m]=x,c.push(m,x),i[m]=f))}if(typeof t<"u"&&typeof a[t]>"u"){var b=["Could not find a path from ",r," to ",t,"."].join("");throw new Error(b)}return i},extract_shortest_path_from_predecessor_list:function(s,r){for(var t=[],i=r;i;)t.push(i),s[i],i=s[i];return t.reverse(),t},find_path:function(s,r,t){var i=e.single_source_shortest_paths(s,r,t);return e.extract_shortest_path_from_predecessor_list(i,t)},PriorityQueue:{make:function(s){var r=e.PriorityQueue,t={},i;s=s||{};for(i in r)r.hasOwnProperty(i)&&(t[i]=r[i]);return t.queue=[],t.sorter=s.sorter||r.default_sorter,t},default_sorter:function(s,r){return s.cost-r.cost},push:function(s,r){var t={value:s,cost:r};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e})(we)),we.exports}var tt;function zt(){return tt||(tt=1,(function(n){const e=V(),s=qt(),r=Ot(),t=Vt(),i=Ht(),a=gt(),c=O(),u=Kt();function f(b){return unescape(encodeURIComponent(b)).length}function m(b,T,E){const S=[];let A;for(;(A=b.exec(E))!==null;)S.push({data:A[0],index:A.index,mode:T,length:A[0].length});return S}function y(b){const T=m(a.NUMERIC,e.NUMERIC,b),E=m(a.ALPHANUMERIC,e.ALPHANUMERIC,b);let S,A;return c.isKanjiModeEnabled()?(S=m(a.BYTE,e.BYTE,b),A=m(a.KANJI,e.KANJI,b)):(S=m(a.BYTE_KANJI,e.BYTE,b),A=[]),T.concat(E,S,A).sort(function(P,j){return P.index-j.index}).map(function(P){return{data:P.data,mode:P.mode,length:P.length}})}function g(b,T){switch(T){case e.NUMERIC:return s.getBitsLength(b);case e.ALPHANUMERIC:return r.getBitsLength(b);case e.KANJI:return i.getBitsLength(b);case e.BYTE:return t.getBitsLength(b)}}function p(b){return b.reduce(function(T,E){const S=T.length-1>=0?T[T.length-1]:null;return S&&S.mode===E.mode?(T[T.length-1].data+=E.data,T):(T.push(E),T)},[])}function x(b){const T=[];for(let E=0;E<b.length;E++){const S=b[E];switch(S.mode){case e.NUMERIC:T.push([S,{data:S.data,mode:e.ALPHANUMERIC,length:S.length},{data:S.data,mode:e.BYTE,length:S.length}]);break;case e.ALPHANUMERIC:T.push([S,{data:S.data,mode:e.BYTE,length:S.length}]);break;case e.KANJI:T.push([S,{data:S.data,mode:e.BYTE,length:f(S.data)}]);break;case e.BYTE:T.push([{data:S.data,mode:e.BYTE,length:f(S.data)}])}}return T}function v(b,T){const E={},S={start:{}};let A=["start"];for(let N=0;N<b.length;N++){const P=b[N],j=[];for(let w=0;w<P.length;w++){const R=P[w],C=""+N+w;j.push(C),E[C]={node:R,lastCount:0},S[C]={};for(let l=0;l<A.length;l++){const d=A[l];E[d]&&E[d].node.mode===R.mode?(S[d][C]=g(E[d].lastCount+R.length,R.mode)-g(E[d].lastCount,R.mode),E[d].lastCount+=R.length):(E[d]&&(E[d].lastCount=R.length),S[d][C]=g(R.length,R.mode)+4+e.getCharCountIndicator(R.mode,T))}}A=j}for(let N=0;N<A.length;N++)S[A[N]].end=0;return{map:S,table:E}}function I(b,T){let E;const S=e.getBestModeForData(b);if(E=e.from(T,S),E!==e.BYTE&&E.bit<S.bit)throw new Error('"'+b+'" cannot be encoded with mode '+e.toString(E)+`.
 Suggested mode is: `+e.toString(S));switch(E===e.KANJI&&!c.isKanjiModeEnabled()&&(E=e.BYTE),E){case e.NUMERIC:return new s(b);case e.ALPHANUMERIC:return new r(b);case e.KANJI:return new i(b);case e.BYTE:return new t(b)}}n.fromArray=function(T){return T.reduce(function(E,S){return typeof S=="string"?E.push(I(S,null)):S.data&&E.push(I(S.data,S.mode)),E},[])},n.fromString=function(T,E){const S=y(T,c.isKanjiModeEnabled()),A=x(S),N=v(A,E),P=u.find_path(N.map,"start","end"),j=[];for(let w=1;w<P.length-1;w++)j.push(N.table[P[w]].node);return n.fromArray(p(j))},n.rawSplit=function(T){return n.fromArray(y(T,c.isKanjiModeEnabled()))}})(ge)),ge}var nt;function Gt(){if(nt)return te;nt=1;const n=O(),e=Pe(),s=Tt(),r=At(),t=Bt(),i=Dt(),a=Lt(),c=ft(),u=kt(),f=Ut(),m=_t(),y=V(),g=zt();function p(N,P){const j=N.size,w=i.getPositions(P);for(let R=0;R<w.length;R++){const C=w[R][0],l=w[R][1];for(let d=-1;d<=7;d++)if(!(C+d<=-1||j<=C+d))for(let h=-1;h<=7;h++)l+h<=-1||j<=l+h||(d>=0&&d<=6&&(h===0||h===6)||h>=0&&h<=6&&(d===0||d===6)||d>=2&&d<=4&&h>=2&&h<=4?N.set(C+d,l+h,!0,!0):N.set(C+d,l+h,!1,!0))}}function x(N){const P=N.size;for(let j=8;j<P-8;j++){const w=j%2===0;N.set(j,6,w,!0),N.set(6,j,w,!0)}}function v(N,P){const j=t.getPositions(P);for(let w=0;w<j.length;w++){const R=j[w][0],C=j[w][1];for(let l=-2;l<=2;l++)for(let d=-2;d<=2;d++)l===-2||l===2||d===-2||d===2||l===0&&d===0?N.set(R+l,C+d,!0,!0):N.set(R+l,C+d,!1,!0)}}function I(N,P){const j=N.size,w=f.getEncodedBits(P);let R,C,l;for(let d=0;d<18;d++)R=Math.floor(d/3),C=d%3+j-8-3,l=(w>>d&1)===1,N.set(R,C,l,!0),N.set(C,R,l,!0)}function b(N,P,j){const w=N.size,R=m.getEncodedBits(P,j);let C,l;for(C=0;C<15;C++)l=(R>>C&1)===1,C<6?N.set(C,8,l,!0):C<8?N.set(C+1,8,l,!0):N.set(w-15+C,8,l,!0),C<8?N.set(8,w-C-1,l,!0):C<9?N.set(8,15-C-1+1,l,!0):N.set(8,15-C-1,l,!0);N.set(w-8,8,1,!0)}function T(N,P){const j=N.size;let w=-1,R=j-1,C=7,l=0;for(let d=j-1;d>0;d-=2)for(d===6&&d--;;){for(let h=0;h<2;h++)if(!N.isReserved(R,d-h)){let B=!1;l<P.length&&(B=(P[l]>>>C&1)===1),N.set(R,d-h,B),C--,C===-1&&(l++,C=7)}if(R+=w,R<0||j<=R){R-=w,w=-w;break}}}function E(N,P,j){const w=new s;j.forEach(function(h){w.put(h.mode.bit,4),w.put(h.getLength(),y.getCharCountIndicator(h.mode,N)),h.write(w)});const R=n.getSymbolTotalCodewords(N),C=c.getTotalCodewordsCount(N,P),l=(R-C)*8;for(w.getLengthInBits()+4<=l&&w.put(0,4);w.getLengthInBits()%8!==0;)w.putBit(0);const d=(l-w.getLengthInBits())/8;for(let h=0;h<d;h++)w.put(h%2?17:236,8);return S(w,N,P)}function S(N,P,j){const w=n.getSymbolTotalCodewords(P),R=c.getTotalCodewordsCount(P,j),C=w-R,l=c.getBlocksCount(P,j),d=w%l,h=l-d,B=Math.floor(w/l),M=Math.floor(C/l),wt=M+1,Re=B-M,Nt=new u(Re);let W=0;const Y=new Array(l),Ie=new Array(l);let Z=0;const xt=new Uint8Array(N.buffer);for(let H=0;H<l;H++){const $=H<h?M:wt;Y[H]=xt.slice(W,W+$),Ie[H]=Nt.encode(Y[H]),W+=$,Z=Math.max(Z,$)}const X=new Uint8Array(w);let Te=0,k,U;for(k=0;k<Z;k++)for(U=0;U<l;U++)k<Y[U].length&&(X[Te++]=Y[U][k]);for(k=0;k<Re;k++)for(U=0;U<l;U++)X[Te++]=Ie[U][k];return X}function A(N,P,j,w){let R;if(Array.isArray(N))R=g.fromArray(N);else if(typeof N=="string"){let B=P;if(!B){const M=g.rawSplit(N);B=f.getBestVersionForData(M,j)}R=g.fromString(N,B||40)}else throw new Error("Invalid data");const C=f.getBestVersionForData(R,j);if(!C)throw new Error("The amount of data is too big to be stored in a QR Code");if(!P)P=C;else if(P<C)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+C+`.
`);const l=E(P,j,R),d=n.getSymbolSize(P),h=new r(d);return p(h,P),x(h),v(h,P),b(h,j,0),P>=7&&I(h,P),T(h,l),isNaN(w)&&(w=a.getBestMask(h,b.bind(null,h,j))),a.applyMask(w,h),b(h,j,w),{modules:h,version:P,errorCorrectionLevel:j,maskPattern:w,segments:R}}return te.create=function(P,j){if(typeof P>"u"||P==="")throw new Error("No input text");let w=e.M,R,C;return typeof j<"u"&&(w=e.from(j.errorCorrectionLevel,e.M),R=f.from(j.version),C=a.from(j.maskPattern),j.toSJISFunc&&n.setToSJISFunction(j.toSJISFunc)),A(P,R,w,C)},te}var Ne={},xe={},rt;function mt(){return rt||(rt=1,(function(n){function e(s){if(typeof s=="number"&&(s=s.toString()),typeof s!="string")throw new Error("Color should be defined as hex string");let r=s.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+s);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(i){return[i,i]}))),r.length===6&&r.push("F","F");const t=parseInt(r.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+r.slice(0,6).join("")}}n.getOptions=function(r){r||(r={}),r.color||(r.color={});const t=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,i=r.width&&r.width>=21?r.width:void 0,a=r.scale||4;return{width:i,scale:i?4:a,margin:t,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},n.getScale=function(r,t){return t.width&&t.width>=r+t.margin*2?t.width/(r+t.margin*2):t.scale},n.getImageWidth=function(r,t){const i=n.getScale(r,t);return Math.floor((r+t.margin*2)*i)},n.qrToImageData=function(r,t,i){const a=t.modules.size,c=t.modules.data,u=n.getScale(a,i),f=Math.floor((a+i.margin*2)*u),m=i.margin*u,y=[i.color.light,i.color.dark];for(let g=0;g<f;g++)for(let p=0;p<f;p++){let x=(g*f+p)*4,v=i.color.light;if(g>=m&&p>=m&&g<f-m&&p<f-m){const I=Math.floor((g-m)/u),b=Math.floor((p-m)/u);v=y[c[I*a+b]?1:0]}r[x++]=v.r,r[x++]=v.g,r[x++]=v.b,r[x]=v.a}}})(xe)),xe}var it;function Yt(){return it||(it=1,(function(n){const e=mt();function s(t,i,a){t.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=a,i.width=a,i.style.height=a+"px",i.style.width=a+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(i,a,c){let u=c,f=a;typeof u>"u"&&(!a||!a.getContext)&&(u=a,a=void 0),a||(f=r()),u=e.getOptions(u);const m=e.getImageWidth(i.modules.size,u),y=f.getContext("2d"),g=y.createImageData(m,m);return e.qrToImageData(g.data,i,u),s(y,f,m),y.putImageData(g,0,0),f},n.renderToDataURL=function(i,a,c){let u=c;typeof u>"u"&&(!a||!a.getContext)&&(u=a,a=void 0),u||(u={});const f=n.render(i,a,u),m=u.type||"image/png",y=u.rendererOpts||{};return f.toDataURL(m,y.quality)}})(Ne)),Ne}var be={},ot;function Jt(){if(ot)return be;ot=1;const n=mt();function e(t,i){const a=t.a/255,c=i+'="'+t.hex+'"';return a<1?c+" "+i+'-opacity="'+a.toFixed(2).slice(1)+'"':c}function s(t,i,a){let c=t+i;return typeof a<"u"&&(c+=" "+a),c}function r(t,i,a){let c="",u=0,f=!1,m=0;for(let y=0;y<t.length;y++){const g=Math.floor(y%i),p=Math.floor(y/i);!g&&!f&&(f=!0),t[y]?(m++,y>0&&g>0&&t[y-1]||(c+=f?s("M",g+a,.5+p+a):s("m",u,0),u=0,f=!1),g+1<i&&t[y+1]||(c+=s("h",m),m=0)):u++}return c}return be.render=function(i,a,c){const u=n.getOptions(a),f=i.modules.size,m=i.modules.data,y=f+u.margin*2,g=u.color.light.a?"<path "+e(u.color.light,"fill")+' d="M0 0h'+y+"v"+y+'H0z"/>':"",p="<path "+e(u.color.dark,"stroke")+' d="'+r(m,f,u.margin)+'"/>',x='viewBox="0 0 '+y+" "+y+'"',I='<svg xmlns="http://www.w3.org/2000/svg" '+(u.width?'width="'+u.width+'" height="'+u.width+'" ':"")+x+' shape-rendering="crispEdges">'+g+p+`</svg>
`;return typeof c=="function"&&c(null,I),I},be}var st;function Qt(){if(st)return K;st=1;const n=It(),e=Gt(),s=Yt(),r=Jt();function t(i,a,c,u,f){const m=[].slice.call(arguments,1),y=m.length,g=typeof m[y-1]=="function";if(!g&&!n())throw new Error("Callback required as last argument");if(g){if(y<2)throw new Error("Too few arguments provided");y===2?(f=c,c=a,a=u=void 0):y===3&&(a.getContext&&typeof f>"u"?(f=u,u=void 0):(f=u,u=c,c=a,a=void 0))}else{if(y<1)throw new Error("Too few arguments provided");return y===1?(c=a,a=u=void 0):y===2&&!a.getContext&&(u=c,c=a,a=void 0),new Promise(function(p,x){try{const v=e.create(c,u);p(i(v,a,u))}catch(v){x(v)}})}try{const p=e.create(c,u);f(null,i(p,a,u))}catch(p){f(p)}}return K.create=e.create,K.toCanvas=t.bind(null,s.render),K.toDataURL=t.bind(null,s.renderToDataURL),K.toString=t.bind(null,function(i,a,c){return r.render(i,c)}),K}var Wt=Qt();const Zt=bt(Wt);function Xt(n,e){const s=URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download=e,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(s)}function $t(n){try{const e=new URL(n);return e.protocol==="https:"||e.protocol==="http:"}catch{return!1}}async function en(n){let e;const s=(n.paymentLink||"").trim();if(s&&$t(s))try{e=await Zt.toDataURL(s,{width:180,margin:1})}catch{e=void 0}const[{pdf:r},{InvoicePdf:t}]=await Promise.all([Be(()=>import("./react-pdf.browser-21dgEwUp.js"),__vite__mapDeps([0,1,2])),Be(()=>import("./InvoicePdf-BKle230d.js"),__vite__mapDeps([3,1,2,0]))]),i=dt.createElement(t,{draft:{...n,qrDataUrl:e}}),a=await r(i).toBlob(),c=(n.invoiceNo||"invoice").replace(/[^a-zA-Z0-9._-]+/g,"-");Xt(a,`${c}.pdf`)}function q(n){const e=typeof n=="number"?n:Number(n);return Number.isFinite(e)?e:0}function Ce(n,e,s){return Math.min(s,Math.max(e,n))}function tn(n){const e=n.items.map(x=>{const v=q(x.qty),I=q(x.rate),b=v*I,T=Ce(q(x.discountPct),0,100),E=b*(T/100);return{lineAmount:b,lineDiscount:E}}),s=e.reduce((x,v)=>x+v.lineAmount,0),r=e.reduce((x,v)=>x+v.lineDiscount,0),t=s-r,i=Math.max(0,q(n.shippingFee)),a=Math.max(0,t+i),c=Ce(q(n.invoiceDiscountAmount),0,a),u=t-c+i,f=Math.max(0,q(n.taxRatePct)),m=u*(f/100),y=u+m,g=Ce(q(n.amountPaid),0,Math.max(0,y)),p=y-g;return{lineSubtotal:s,lineDiscountTotal:r,subtotal:t,invoiceDiscountAmountApplied:c,shippingFeeApplied:i,taxableBase:u,tax:m,grandTotal:y,amountPaidApplied:g,balanceDue:p}}const nn=["USD","EUR","GBP","CAD","AUD","NZD","JPY","CNY","INR","NGN","ZAR","KES","GHS","XOF","XAF","CHF","SEK","NOK","DKK","SGD","HKD","AED","SAR","QAR","PKR","BDT","MYR","THB","IDR","PHP","VND","KRW","BRL","MXN","ARS","CLP","COP","PEN","TRY","PLN","CZK","HUF","RON","ILS","EGP","MAD","TND","RUB","UAH"];function rn(){const n=Intl;if(typeof n.supportedValuesOf=="function")try{return n.supportedValuesOf("currency").map(e=>e.toUpperCase())}catch{}return nn}function on(n){var e;try{return((e=new Intl.NumberFormat(void 0,{style:"currency",currency:n,currencyDisplay:"narrowSymbol"}).formatToParts(1).find(t=>t.type==="currency"))==null?void 0:e.value)||n}catch{return n}}function sn(n){try{return new Intl.DisplayNames([navigator.language||"en"],{type:"currency"}).of(n)||n}catch{return n}}function an(){return Array.from(new Set(rn())).sort((e,s)=>e.localeCompare(s)).map(e=>{const s=sn(e),r=on(e);return{code:e,name:s,symbol:r,label:`${e} - ${s} (${r})`}})}const pt=[{id:"none",label:"No tax",rate:0},{id:"ca_gst_5",label:"GST (Canada)",rate:5},{id:"ca_hst_13",label:"HST (Ontario)",rate:13},{id:"ca_hst_15",label:"HST (Atlantic)",rate:15},{id:"vat_standard_20",label:"VAT (Standard)",rate:20},{id:"vat_reduced_5",label:"VAT (Reduced)",rate:5},{id:"sales_tax_8",label:"Sales Tax",rate:8}];function ln(n){return pt.find(e=>e.id===n)||null}function at(n){const e=(n||"").trim();if(!e)return"INV-0001";const s=e.match(/^(.*?)(\d+)([^\d]*)$/);if(!s)return`${e}-1`;const r=s[1]||"",t=s[2]||"0",i=s[3]||"",a=String(Number(t)+1).padStart(t.length,"0");return`${r}${a}${i}`}const je="invoice.draft.v1",Ee="invoice.sequence.v1",yt="invoice.logoDataUrl",cn=5*1024*1024,un=new Set(["image/png","image/jpeg"]),vt=["hours","quantity","service","fixed_rate"];function D(n,e){try{return new Intl.NumberFormat(void 0,{style:"currency",currency:e}).format(n)}catch{return new Intl.NumberFormat(void 0,{style:"currency",currency:"USD"}).format(n)}}function lt(){const n=new Date,e=String(n.getFullYear()),s=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0");return`${e}-${s}-${r}`}function Se(){return Math.random().toString(16).slice(2)+Date.now().toString(16)}function G(n){const e=(n||"").trim();return/^#[0-9a-fA-F]{6}$/.test(e)?e:"#FFD166"}function Q(n="INV-0001",e=""){return{invoiceNo:n,poNo:"",issueDate:lt(),dueDate:lt(),paymentTerms:"Payment due within 15 days",from:`Your Company
Street
City, State ZIP`,billTo:`Client Name
Street
City, State ZIP`,notes:"Thanks for your business.",bankDetails:`Bank name
Account name
Account number / IBAN
Routing / SWIFT`,currency:"USD",taxRatePct:0,taxPresetId:"none",taxLabel:"Tax",invoiceDiscountAmount:0,shippingFee:0,amountPaid:0,logoDataUrl:e,paymentLink:"",templateId:"minimalist",brandColor:"#FFD166",items:[{id:Se(),description:"Service or product",unitType:"quantity",qty:1,rate:100,discountPct:0}]}}function dn(n){if(!n||typeof n!="object")return null;const e=n,s=Q(e.invoiceNo||"INV-0001",typeof e.logoDataUrl=="string"?e.logoDataUrl:""),t=(Array.isArray(e.items)?e.items:s.items).map(i=>{const a=i;return{id:typeof a.id=="string"&&a.id?a.id:Se(),description:typeof a.description=="string"?a.description:"",unitType:vt.includes(a.unitType||"quantity")?a.unitType:"quantity",qty:Number.isFinite(Number(a.qty))?Number(a.qty):0,rate:Number.isFinite(Number(a.rate))?Number(a.rate):0,discountPct:Number.isFinite(Number(a.discountPct))?Number(a.discountPct):0}});return{...s,...e,brandColor:G(typeof e.brandColor=="string"?e.brandColor:s.brandColor),currency:typeof e.currency=="string"?e.currency:s.currency,taxPresetId:typeof e.taxPresetId=="string"?e.taxPresetId:s.taxPresetId,taxLabel:typeof e.taxLabel=="string"?e.taxLabel:s.taxLabel,paymentLink:typeof e.paymentLink=="string"?e.paymentLink:"",templateId:e.templateId||"minimalist",items:t.length?t:s.items}}function fn(){if(typeof window>"u")return null;try{const n=window.localStorage.getItem(je);if(!n)return null;const e=JSON.parse(n);return e.version!==1||!e.draft?null:dn(e.draft)}catch{return null}}function hn(){if(typeof window>"u")return"";try{return window.localStorage.getItem(yt)||""}catch{return""}}function ct(){if(typeof window>"u")return null;try{const n=window.localStorage.getItem(Ee);if(!n)return null;const e=JSON.parse(n);return e.version!==1||typeof e.nextInvoiceNo!="string"||typeof e.lastInvoiceNo!="string"?null:e}catch{return null}}function gn(n){if(!(typeof window>"u"))try{window.localStorage.setItem(Ee,JSON.stringify(n))}catch{}}function mn(n){const e=Number.isFinite(n.qty)?n.qty:0,s=Number.isFinite(n.rate)?n.rate:0,r=Number.isFinite(n.discountPct)?n.discountPct:0,t=Math.min(100,Math.max(0,r)),i=e*s;return i-i*(t/100)}function ut(n){try{const e=new URL(n);return e.protocol==="https:"||e.protocol==="http:"}catch{return!1}}function pn(){const n=L.useMemo(()=>ct(),[]),[e,s]=L.useState(()=>{const l=fn();if(l)return l;const d=hn();return Q((n==null?void 0:n.nextInvoiceNo)||"INV-0001",d)}),[r,t]=L.useState(""),[i,a]=L.useState(!1),[c,u]=L.useState(""),[f,m]=L.useState(null),y=L.useRef(null),g=L.useMemo(()=>an(),[]),p=L.useMemo(()=>g.find(l=>l.code===e.currency)||null,[g,e.currency]),x=L.useMemo(()=>{const l=c.trim().toLowerCase();return l?g.filter(d=>d.label.toLowerCase().includes(l)).slice(0,300):g.slice(0,300)},[g,c]);L.useEffect(()=>{!c&&p&&u(p.label)},[p,c]),L.useEffect(()=>{const l=d=>{d.preventDefault(),m(d)};return window.addEventListener("beforeinstallprompt",l),()=>window.removeEventListener("beforeinstallprompt",l)},[]),L.useEffect(()=>(y.current&&window.clearTimeout(y.current),y.current=window.setTimeout(()=>{const l={version:1,savedAt:new Date().toISOString(),draft:e};try{window.localStorage.setItem(je,JSON.stringify(l))}catch{}},400),()=>{y.current&&window.clearTimeout(y.current)}),[e]);const v=L.useMemo(()=>tn({items:e.items,taxRatePct:e.taxRatePct,invoiceDiscountAmount:e.invoiceDiscountAmount,shippingFee:e.shippingFee,amountPaid:e.amountPaid}),[e.items,e.taxRatePct,e.invoiceDiscountAmount,e.shippingFee,e.amountPaid]);function I(l,d){s(h=>({...h,[l]:d}))}function b(l,d){s(h=>({...h,items:h.items.map(B=>B.id===l?{...B,...d}:B)}))}function T(){s(l=>({...l,items:[...l.items,{id:Se(),description:"",unitType:"quantity",qty:1,rate:0,discountPct:0}]}))}function E(l){s(d=>({...d,items:d.items.filter(h=>h.id!==l)}))}function S(){s(l=>({...l,logoDataUrl:""})),t("")}async function A(l){if(!l)return;if(!un.has(l.type)){t("Use a PNG or JPG image.");return}if(l.size>cn){t("Logo must be 5MB or smaller.");return}let d="";try{d=await new Promise((h,B)=>{const M=new FileReader;M.onerror=()=>B(new Error("Failed to read image file.")),M.onload=()=>h(typeof M.result=="string"?M.result:""),M.readAsDataURL(l)})}catch{t("Failed to load logo file.");return}if(!d){t("Failed to load logo file.");return}s(h=>({...h,logoDataUrl:d})),t("")}function N(l){const d=ln(l);d&&s(h=>({...h,taxPresetId:d.id,taxLabel:d.id==="none"?"Tax":d.label,taxRatePct:d.rate}))}function P(){I("invoiceNo",at(e.invoiceNo))}async function j(){if(f){f.prompt();try{await f.userChoice}finally{m(null)}}}async function w(){const l=e.paymentLink.trim();if(l&&!ut(l)){alert("Payment link must be a valid http(s) URL.");return}await en({invoiceNo:e.invoiceNo,poNo:e.poNo,issueDate:e.issueDate,dueDate:e.dueDate,paymentTerms:e.paymentTerms,from:e.from,billTo:e.billTo,notes:e.notes,bankDetails:e.bankDetails,currency:e.currency,taxRatePct:e.taxRatePct,taxPresetId:e.taxPresetId,taxLabel:e.taxLabel,invoiceDiscountAmount:e.invoiceDiscountAmount,shippingFee:e.shippingFee,amountPaid:e.amountPaid,logoDataUrl:e.logoDataUrl,paymentLink:l,templateId:e.templateId,brandColor:G(e.brandColor),items:e.items});const d=at(e.invoiceNo),h={version:1,lastInvoiceNo:e.invoiceNo,nextInvoiceNo:d};gn(h),s(B=>({...B,invoiceNo:d})),Ct("invoice_pdf_download",{items:e.items.length})}function R(){const l=ct();s(Q((l==null?void 0:l.nextInvoiceNo)||"INV-0001","")),t("")}function C(){try{window.localStorage.removeItem(je),window.localStorage.removeItem(Ee),window.localStorage.removeItem(yt)}catch{}s(Q("INV-0001","")),t("")}return o.jsxs("div",{className:`template-${e.templateId}`,style:{"--brand-color":G(e.brandColor)},children:[o.jsxs("div",{className:"grid",children:[o.jsxs("section",{className:"panel",children:[o.jsxs("div",{className:"hd invoiceHd",children:[o.jsxs("div",{className:"invoiceHdTitle",children:[o.jsx("img",{className:"invoiceMiniMark",src:"/brand/logo-mark.svg",alt:"","aria-hidden":"true"}),o.jsxs("div",{children:[o.jsx("h2",{children:"Invoice Builder"}),o.jsx("p",{className:"fineMuted",children:"Structured layout with clear spacing and faster data entry."})]})]}),o.jsxs("div",{className:"actions",children:[o.jsxs("span",{className:"pill privateBadge",role:"status","aria-live":"polite",children:[o.jsx("strong",{children:"Private"}),o.jsx("span",{children:"Invoice data stays local"}),o.jsx("button",{className:"linkBtn",type:"button",onClick:()=>a(!0),children:"Learn more"})]}),f?o.jsx("button",{className:"btn",onClick:()=>void j(),type:"button",children:"Install app"}):null,o.jsx("button",{className:"btn",onClick:R,type:"button",children:"Reset"}),o.jsx("button",{className:"btn",onClick:C,type:"button",children:"Clear local data"}),o.jsx("button",{className:"btn primary",onClick:()=>void w(),type:"button",children:"Download PDF"})]})]}),o.jsxs("div",{className:"bd invoiceForm",children:[o.jsxs("section",{className:"invoiceSection",children:[o.jsxs("div",{className:"sectionTitleRow",children:[o.jsx("h3",{className:"sectionTitle",children:"Invoice details"}),o.jsxs("div",{className:"pill",children:[o.jsx("span",{children:"Currency"}),o.jsx("strong",{children:e.currency})]})]}),o.jsxs("div",{className:"row",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"invoiceNo",children:"Invoice No."}),o.jsxs("div",{className:"fieldActionRow",children:[o.jsx("input",{id:"invoiceNo",value:e.invoiceNo,onChange:l=>I("invoiceNo",l.target.value),placeholder:"INV-0001"}),o.jsx("button",{className:"btn",type:"button",onClick:P,children:"Use next"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"poNo",children:"PO number"}),o.jsx("input",{id:"poNo",value:e.poNo,onChange:l=>I("poNo",l.target.value),placeholder:"PO-1001"})]})]}),o.jsxs("div",{className:"row",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"currencyQuery",children:"Search currency"}),o.jsx("input",{id:"currencyQuery",value:c,onChange:l=>u(l.target.value),placeholder:"Type USD, EUR, NGN, CAD..."}),o.jsx("select",{"aria-label":"Select currency",value:e.currency,onChange:l=>{const d=l.target.value;I("currency",d);const h=g.find(B=>B.code===d);u(h?h.label:d)},children:x.map(l=>o.jsx("option",{value:l.code,children:l.label},l.code))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"paymentTerms",children:"Payment terms"}),o.jsx("input",{id:"paymentTerms",value:e.paymentTerms,onChange:l=>I("paymentTerms",l.target.value),placeholder:"Payment due within 15 days"}),o.jsx("div",{className:"fineMuted",children:"Add due terms, accepted methods, and any late-fee policy."})]})]}),o.jsxs("div",{className:"row",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"issueDate",children:"Issue date"}),o.jsx("input",{id:"issueDate",type:"date",value:e.issueDate,onChange:l=>I("issueDate",l.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"dueDate",children:"Due date"}),o.jsx("input",{id:"dueDate",type:"date",value:e.dueDate,onChange:l=>I("dueDate",l.target.value)})]})]}),o.jsxs("div",{className:"row",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"templateId",children:"Template"}),o.jsxs("select",{id:"templateId",value:e.templateId,onChange:l=>I("templateId",l.target.value),children:[o.jsx("option",{value:"minimalist",children:"Minimalist"}),o.jsx("option",{value:"creative",children:"Creative"}),o.jsx("option",{value:"traditional",children:"Traditional"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"brandColor",children:"Brand color"}),o.jsx("input",{id:"brandColor",type:"color",value:G(e.brandColor),onChange:l=>I("brandColor",G(l.target.value))})]})]}),o.jsxs("div",{className:"row",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"logo",children:"Logo"}),o.jsx("input",{id:"logo",type:"file",accept:".png,.jpg,.jpeg,image/png,image/jpeg",onChange:l=>{var h;const d=((h=l.target.files)==null?void 0:h[0])||null;A(d)}}),o.jsx("div",{className:"fineMuted",children:"JPG/PNG up to 5MB. Stored locally in your browser only."}),r?o.jsx("div",{className:"fineMuted",children:r}):null,e.logoDataUrl?o.jsxs("div",{className:"logoPreviewRow",children:[o.jsx("img",{src:e.logoDataUrl,alt:"Invoice logo preview",className:"logoThumb"}),o.jsx("button",{className:"btn",type:"button",onClick:S,children:"Remove logo"})]}):null]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"paymentLink",children:"Stripe payment link (optional)"}),o.jsx("input",{id:"paymentLink",value:e.paymentLink,onChange:l=>I("paymentLink",l.target.value),placeholder:"https://buy.stripe.com/..."}),e.paymentLink&&!ut(e.paymentLink)?o.jsx("div",{className:"fineMuted",children:"Enter a valid http(s) URL."}):null]})]})]}),o.jsxs("section",{className:"invoiceSection",children:[o.jsx("h3",{className:"sectionTitle",children:"Parties"}),o.jsxs("div",{className:"row",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"from",children:"From"}),o.jsx("textarea",{id:"from",value:e.from,onChange:l=>I("from",l.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"billTo",children:"Bill to"}),o.jsx("textarea",{id:"billTo",value:e.billTo,onChange:l=>I("billTo",l.target.value)})]})]})]}),o.jsxs("section",{className:"invoiceSection",children:[o.jsx("h3",{className:"sectionTitle",children:"Items"}),o.jsx("div",{className:"itemsTableWrap",children:o.jsxs("table",{className:"itemsTable",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",style:{width:"40%"},children:"Description"}),o.jsx("th",{scope:"col",style:{width:"12%"},children:"Unit"}),o.jsx("th",{scope:"col",className:"num",style:{width:"8%"},children:"Qty"}),o.jsx("th",{scope:"col",className:"num",style:{width:"12%"},children:"Rate"}),o.jsx("th",{scope:"col",className:"num",style:{width:"10%"},children:"Disc %"}),o.jsx("th",{scope:"col",className:"num",style:{width:"12%"},children:"Amount"}),o.jsx("th",{scope:"col"})]})}),o.jsx("tbody",{children:e.items.map(l=>{const d=mn(l);return o.jsxs("tr",{children:[o.jsx("td",{children:o.jsx("input",{value:l.description,onChange:h=>b(l.id,{description:h.target.value}),placeholder:"Line item description"})}),o.jsx("td",{children:o.jsx("select",{value:l.unitType,onChange:h=>b(l.id,{unitType:h.target.value}),children:vt.map(h=>o.jsx("option",{value:h,children:h},h))})}),o.jsx("td",{className:"num",children:o.jsx("input",{inputMode:"decimal",value:String(l.qty),onChange:h=>b(l.id,{qty:Number(h.target.value)})})}),o.jsx("td",{className:"num",children:o.jsx("input",{inputMode:"decimal",value:String(l.rate),onChange:h=>b(l.id,{rate:Number(h.target.value)})})}),o.jsx("td",{className:"num",children:o.jsx("input",{inputMode:"decimal",value:String(l.discountPct),onChange:h=>b(l.id,{discountPct:Number(h.target.value)})})}),o.jsx("td",{className:"num",children:D(d,e.currency)}),o.jsx("td",{className:"num",children:o.jsx("button",{className:"btn danger",onClick:()=>E(l.id),type:"button",children:"Remove"})})]},l.id)})})]})}),o.jsxs("div",{className:"itemsActions",children:[o.jsx("button",{className:"btn",onClick:T,type:"button",children:"Add item"}),o.jsx("span",{className:"pill",children:"Choose unit per line: hours, quantity, service, or fixed rate."})]})]}),o.jsxs("section",{className:"invoiceSection",children:[o.jsx("h3",{className:"sectionTitle",children:"Payment & totals"}),o.jsxs("div",{className:"row",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"notes",children:"Notes / payment terms"}),o.jsx("textarea",{id:"notes",value:e.notes,onChange:l=>I("notes",l.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"bankDetails",children:"Bank / payment details"}),o.jsx("textarea",{id:"bankDetails",value:e.bankDetails,onChange:l=>I("bankDetails",l.target.value)})]})]}),o.jsxs("div",{className:"row totalsRowWrap",children:[o.jsxs("div",{className:"totals totalsInputs",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"taxPreset",children:"Tax preset"}),o.jsx("select",{id:"taxPreset",value:e.taxPresetId,onChange:l=>N(l.target.value),children:pt.map(l=>o.jsxs("option",{value:l.id,children:[l.label," (",l.rate,"%)"]},l.id))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"taxLabel",children:"Tax label"}),o.jsx("input",{id:"taxLabel",value:e.taxLabel,onChange:l=>I("taxLabel",l.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"taxRatePct",children:"Tax rate (%)"}),o.jsx("input",{id:"taxRatePct",inputMode:"decimal",value:String(e.taxRatePct),onChange:l=>I("taxRatePct",Number(l.target.value))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"invoiceDiscountAmount",children:"Invoice discount"}),o.jsx("input",{id:"invoiceDiscountAmount",inputMode:"decimal",value:String(e.invoiceDiscountAmount),onChange:l=>I("invoiceDiscountAmount",Number(l.target.value))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"shippingFee",children:"Shipping fee"}),o.jsx("input",{id:"shippingFee",inputMode:"decimal",value:String(e.shippingFee),onChange:l=>I("shippingFee",Number(l.target.value))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"amountPaid",children:"Amount paid"}),o.jsx("input",{id:"amountPaid",inputMode:"decimal",value:String(e.amountPaid),onChange:l=>I("amountPaid",Number(l.target.value))})]})]}),o.jsxs("div",{className:"totals totalsSummary",children:[o.jsxs("div",{className:"totalRow",children:[o.jsx("span",{children:"Line subtotal"}),o.jsx("span",{children:D(v.lineSubtotal,e.currency)})]}),o.jsxs("div",{className:"totalRow",children:[o.jsx("span",{children:"Line discounts"}),o.jsxs("span",{children:["-",D(v.lineDiscountTotal,e.currency)]})]}),o.jsxs("div",{className:"totalRow",children:[o.jsx("span",{children:"Subtotal"}),o.jsx("span",{children:D(v.subtotal,e.currency)})]}),o.jsxs("div",{className:"totalRow",children:[o.jsx("span",{children:"Invoice discount"}),o.jsxs("span",{children:["-",D(v.invoiceDiscountAmountApplied,e.currency)]})]}),o.jsxs("div",{className:"totalRow",children:[o.jsx("span",{children:"Shipping"}),o.jsx("span",{children:D(v.shippingFeeApplied,e.currency)})]}),o.jsxs("div",{className:"totalRow",children:[o.jsx("span",{children:e.taxLabel||"Tax"}),o.jsx("span",{children:D(v.tax,e.currency)})]}),o.jsxs("div",{className:"totalRow totalStrongRow",children:[o.jsx("strong",{children:"Grand total"}),o.jsx("strong",{children:D(v.grandTotal,e.currency)})]}),o.jsxs("div",{className:"totalRow",children:[o.jsx("span",{children:"Amount paid"}),o.jsx("span",{children:D(v.amountPaidApplied,e.currency)})]}),o.jsxs("div",{className:"totalRow totalAccentRow",children:[o.jsx("strong",{children:"Balance due"}),o.jsx("strong",{children:D(v.balanceDue,e.currency)})]})]})]})]})]})]}),o.jsxs("aside",{className:"panel",children:[o.jsx("div",{className:"hd",children:o.jsx("h2",{children:"Preview"})}),o.jsxs("div",{className:"bd",children:[o.jsxs("div",{className:"previewBrand",children:[o.jsx("img",{src:"/brand/logo-mark.svg",alt:"","aria-hidden":"true"}),o.jsxs("div",{children:[o.jsx("strong",{children:e.invoiceNo||"Untitled"}),o.jsxs("div",{className:"fineMuted",children:[e.currency," invoice"]})]})]}),o.jsxs("div",{style:{color:"var(--muted)",fontSize:13,whiteSpace:"pre-wrap",lineHeight:1.45},children:[o.jsx("strong",{style:{color:"var(--text)"},children:"From"}),`
`,e.from,`

`,o.jsx("strong",{style:{color:"var(--text)"},children:"Bill to"}),`
`,e.billTo,`

`,o.jsx("strong",{style:{color:"var(--text)"},children:"Details"}),`
`,"Invoice: ",e.invoiceNo||"-",`
`,"PO: ",e.poNo||"-",`
`,"Currency: ",e.currency,`
`,"Terms: ",e.paymentTerms||"-",`
`,"Issue: ",e.issueDate,`
`,"Due: ",e.dueDate,`

`,o.jsx("strong",{style:{color:"var(--text)"},children:"Totals"}),`
`,"Subtotal: ",D(v.subtotal,e.currency),`
`,e.taxLabel||"Tax",": ",D(v.tax,e.currency),`
`,"Grand total: ",D(v.grandTotal,e.currency),`
`,"Paid: ",D(v.amountPaidApplied,e.currency),`
`,"Balance due: ",D(v.balanceDue,e.currency),`

`,o.jsx("strong",{style:{color:"var(--text)"},children:"Bank / payment details"}),`
`,e.bankDetails,`

`,e.paymentLink?o.jsxs(o.Fragment,{children:[o.jsx("strong",{style:{color:"var(--text)"},children:"Pay online"}),`
`,e.paymentLink,`

`]}):null,o.jsx("strong",{style:{color:"var(--text)"},children:"Notes"}),`
`,e.notes]})]})]})]}),i?o.jsx("div",{className:"modalBackdrop",role:"dialog","aria-modal":"true","aria-label":"Privacy info",children:o.jsxs("div",{className:"modalCard",children:[o.jsxs("div",{className:"modalHd",children:[o.jsx("div",{className:"modalTitle",children:"Privacy-first invoice generation"}),o.jsx("button",{className:"iconBtn",type:"button",onClick:()=>a(!1),"aria-label":"Close",children:"Ã—"})]}),o.jsx("div",{className:"modalBd",children:o.jsx("p",{className:"fine",style:{marginTop:0},children:"Invoice content stays on your device. We do not upload invoice fields to our server. Analytics is optional and does not include invoice line-item content."})})]})}):null]})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js")});jt.createRoot(document.getElementById("root")).render(o.jsx(dt.StrictMode,{children:o.jsx(Pt,{children:o.jsx(Et,{title:"Create an invoice",children:o.jsx(pn,{})})})}));export{tn as c};
