const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/react-pdf.browser-R3DeK7RA.js","assets/Layout-D4L0n97K.js","assets/Layout-DDRHGdKp.css","assets/InvoicePdf-BWzRBqHg.js"])))=>i.map(i=>d[i]);
import{r as S,a as g,j as e,t as D,R as C,C as P,S as R}from"./Layout-D4L0n97K.js";const T="modulepreload",I=function(t){return"/"+t},N={},w=function(i,s,a){let u=Promise.resolve();if(s&&s.length>0){let o=function(c){return Promise.all(c.map(m=>Promise.resolve(m).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),v=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));u=o(s.map(c=>{if(c=I(c),c in N)return;N[c]=!0;const m=c.endsWith(".css"),x=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${x}`))return;const n=document.createElement("link");if(n.rel=m?"stylesheet":T,m||(n.as="script"),n.crossOrigin="",n.href=c,v&&n.setAttribute("nonce",v),document.head.appendChild(n),m)return new Promise((d,l)=>{n.addEventListener("load",d),n.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${c}`)))})}))}function h(o){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=o,window.dispatchEvent(r),!r.defaultPrevented)throw o}return u.then(o=>{for(const r of o||[])r.status==="rejected"&&h(r.reason);return i().catch(h)})};function E(t,i){const s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=i,document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(s)}async function F(t){const[{pdf:i},{InvoicePdf:s}]=await Promise.all([w(()=>import("./react-pdf.browser-R3DeK7RA.js"),__vite__mapDeps([0,1,2])),w(()=>import("./InvoicePdf-BWzRBqHg.js"),__vite__mapDeps([3,1,2,0]))]),a=S.createElement(s,{draft:t}),u=await i(a).toBlob(),h=(t.invoiceNo||"invoice").replace(/[^a-zA-Z0-9._-]+/g,"-");E(u,`${h}.pdf`)}function b(t){const i=typeof t=="number"?t:Number(t);return Number.isFinite(i)?i:0}function _(t){return t.reduce((i,s)=>i+b(s.qty)*b(s.rate),0)}function k(t,i){const s=_(t),a=s*(b(i)/100),u=s+a;return{subtotal:s,tax:a,total:u}}function j(t){return new Intl.NumberFormat(void 0,{style:"currency",currency:"USD"}).format(t)}function p(){const t=new Date,i=String(t.getFullYear()),s=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0");return`${i}-${s}-${a}`}function f(){return Math.random().toString(16).slice(2)+Date.now().toString(16)}function q(){const[t,i]=g.useState(()=>({invoiceNo:"INV-0001",issueDate:p(),dueDate:p(),from:`Your Company
Street
City, State ZIP`,billTo:`Client Name
Street
City, State ZIP`,notes:"Thanks for your business.",taxRatePct:0,items:[{id:f(),description:"Service or product",qty:1,rate:100}]})),s=g.useMemo(()=>k(t.items,t.taxRatePct),[t.items,t.taxRatePct]),a=s.subtotal,u=s.tax,h=s.total;function o(n,d){i(l=>({...l,[n]:d}))}function r(n,d){i(l=>({...l,items:l.items.map(y=>y.id===n?{...y,...d}:y)}))}function v(){i(n=>({...n,items:[...n.items,{id:f(),description:"",qty:1,rate:0}]}))}function c(n){i(d=>({...d,items:d.items.filter(l=>l.id!==n)}))}async function m(){await F({invoiceNo:t.invoiceNo,issueDate:t.issueDate,dueDate:t.dueDate,from:t.from,billTo:t.billTo,notes:t.notes,taxRatePct:t.taxRatePct,items:t.items}),D("invoice_pdf_download",{items:t.items.length})}function x(){i({invoiceNo:"INV-0001",issueDate:p(),dueDate:p(),from:`Your Company
Street
City, State ZIP`,billTo:`Client Name
Street
City, State ZIP`,notes:"Thanks for your business.",taxRatePct:0,items:[{id:f(),description:"Service or product",qty:1,rate:100}]})}return e.jsx("div",{children:e.jsxs("div",{className:"grid",children:[e.jsxs("section",{className:"panel",children:[e.jsx("div",{className:"hd",children:e.jsx("h2",{children:"Invoice"})}),e.jsxs("div",{className:"bd",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"pill",style:{justifyContent:"space-between"},children:[e.jsx("span",{children:"PDF export"}),e.jsx("strong",{children:"Ready"})]}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"flex-end",flexWrap:"wrap"},children:[e.jsx("button",{className:"btn",onClick:x,type:"button",children:"Reset"}),e.jsx("button",{className:"btn primary",onClick:()=>void m(),type:"button",children:"Download PDF"})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"invoiceNo",children:"Invoice No."}),e.jsx("input",{id:"invoiceNo",value:t.invoiceNo,onChange:n=>o("invoiceNo",n.target.value),placeholder:"INV-0001"})]}),e.jsxs("div",{className:"pill",style:{justifyContent:"space-between"},children:[e.jsx("span",{children:"Currency"}),e.jsx("strong",{children:"USD"})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"issueDate",children:"Issue date"}),e.jsx("input",{id:"issueDate",type:"date",value:t.issueDate,onChange:n=>o("issueDate",n.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dueDate",children:"Due date"}),e.jsx("input",{id:"dueDate",type:"date",value:t.dueDate,onChange:n=>o("dueDate",n.target.value)})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"from",children:"From"}),e.jsx("textarea",{id:"from",value:t.from,onChange:n=>o("from",n.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"billTo",children:"Bill to"}),e.jsx("textarea",{id:"billTo",value:t.billTo,onChange:n=>o("billTo",n.target.value)})]})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",style:{width:"56%"},children:"Description"}),e.jsx("th",{scope:"col",className:"num",style:{width:"12%"},children:"Qty"}),e.jsx("th",{scope:"col",className:"num",style:{width:"16%"},children:"Rate"}),e.jsx("th",{scope:"col",className:"num",style:{width:"16%"},children:"Amount"}),e.jsx("th",{scope:"col"})]})}),e.jsx("tbody",{children:t.items.map(n=>{const d=(Number.isFinite(n.qty)?n.qty:0)*(Number.isFinite(n.rate)?n.rate:0);return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{value:n.description,onChange:l=>r(n.id,{description:l.target.value}),placeholder:"Line item description"})}),e.jsx("td",{className:"num",children:e.jsx("input",{inputMode:"decimal",value:String(n.qty),onChange:l=>r(n.id,{qty:Number(l.target.value)})})}),e.jsx("td",{className:"num",children:e.jsx("input",{inputMode:"decimal",value:String(n.rate),onChange:l=>r(n.id,{rate:Number(l.target.value)})})}),e.jsx("td",{className:"num",children:j(d)}),e.jsx("td",{className:"num",children:e.jsx("button",{className:"btn danger",onClick:()=>c(n.id),type:"button",children:"Remove"})})]},n.id)})})]})}),e.jsxs("div",{style:{display:"flex",gap:10,marginTop:12,flexWrap:"wrap"},children:[e.jsx("button",{className:"btn",onClick:v,type:"button",children:"Add item"}),e.jsx("span",{className:"pill",children:"Tip: keep this simple for the free version."})]}),e.jsxs("div",{className:"row",style:{marginTop:12},children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notes",children:"Notes"}),e.jsx("textarea",{id:"notes",value:t.notes,onChange:n=>o("notes",n.target.value)})]}),e.jsxs("div",{className:"totals",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"taxRatePct",children:"Tax rate (%)"}),e.jsx("input",{id:"taxRatePct",inputMode:"decimal",value:String(t.taxRatePct),onChange:n=>o("taxRatePct",Number(n.target.value))})]}),e.jsxs("div",{className:"totalRow",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{children:j(a)})]}),e.jsxs("div",{className:"totalRow",children:[e.jsx("span",{children:"Tax"}),e.jsx("span",{children:j(u)})]}),e.jsxs("div",{className:"totalRow",children:[e.jsx("strong",{children:"Total"}),e.jsx("strong",{children:j(h)})]})]})]})]})]}),e.jsxs("aside",{className:"panel",children:[e.jsx("div",{className:"hd",children:e.jsx("h2",{children:"Preview"})}),e.jsxs("div",{className:"bd",children:[e.jsxs("div",{className:"pill",style:{marginBottom:10},children:[e.jsx("span",{children:"Invoice"}),e.jsx("strong",{children:t.invoiceNo||"Untitled"})]}),e.jsxs("div",{style:{color:"var(--muted)",fontSize:13,whiteSpace:"pre-wrap",lineHeight:1.35},children:[e.jsx("strong",{style:{color:"var(--text)"},children:"From"}),`
`,t.from,`

`,e.jsx("strong",{style:{color:"var(--text)"},children:"Bill to"}),`
`,t.billTo,`

`,e.jsx("strong",{style:{color:"var(--text)"},children:"Dates"}),`
`,"Issue: ",t.issueDate,`
`,"Due: ",t.dueDate,`

`,e.jsx("strong",{style:{color:"var(--text)"},children:"Totals"}),`
`,"Subtotal: ",j(a),`
`,"Tax: ",j(u),`
`,"Total: ",j(h),`

`,e.jsx("strong",{style:{color:"var(--text)"},children:"Notes"}),`
`,t.notes]})]})]})]})})}C.createRoot(document.getElementById("root")).render(e.jsx(S.StrictMode,{children:e.jsx(P,{children:e.jsx(R,{title:"Create an invoice",children:e.jsx(q,{})})})}));export{k as c};
